{% extends 'base.html' %}
{% load static %}

{% block title %}ì‹¤ì‹œê°„ ì¢…ëª© ìˆœìœ„{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'stock_price/css/stock.css' %}">
<link rel="stylesheet" href="{% static 'stock_price/css/ranking.css' %}">
<style>
    .ranking-container {
        animation: fadeIn 0.5s ease-in-out;
        max-width: 1200px;
        margin: 0 auto;
        padding: 30px;
    }

    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
</style>
{% endblock %}

{% block content %}
<div class="ranking-container">
    <div class="ranking-header">
        <h1 class="ranking-title">ì‹¤ì‹œê°„ ì‹œì¥ íŠ¸ë Œë“œ</h1>
        <!-- Home button preserved as requested -->
        <a href="{% url 'stock_theme:theme_heatmap' %}"
            style="display: inline-flex; align-items: center; text-decoration: none; color: #aaa; font-size: 14px; font-weight: 500; padding: 6px 12px; border: 1px solid #333; border-radius: 6px; transition: all 0.2s;">
            <span>â† í™ˆìœ¼ë¡œ</span>
        </a>
    </div>

    <div class="tab-menu">
        <button class="tab-btn active" onclick="showTab('fluctuation', event)">ğŸš€ ê¸‰ìƒìŠ¹ ì¢…ëª©</button>
        <button class="tab-btn" onclick="showTab('volume', event)">ğŸ”¥ ê±°ë˜ëŸ‰ ìƒìœ„</button>
    </div>

    <!-- ë“±ë½ë¥  ìƒìœ„ -->
    <div id="fluctuation" class="section-wrapper active">
        <table class="ranking-table">
            <thead>
                <tr>
                    <th style="width: 60px; text-align: center;">ìˆœìœ„</th>
                    <th>ì¢…ëª©ëª…</th>
                    <th class="price-align">í˜„ì¬ê°€</th>
                    <th class="price-align">ë“±ë½ë¥ </th>
                    <th class="price-align">ê±°ë˜ëŸ‰</th>
                </tr>
            </thead>
            <tbody>
                {% for item in rank_fluctuation %}
                <tr>
                    <td class="rank-num {% if forloop.counter <= 3 %}rank-top{% endif %}">{{ forloop.counter }}</td>
                    <td class="stock-name-cell"
                        onclick="location.href='/stock_price/stock/detail/{{ item.stck_shrn_iscd }}/'">
                        {{ item.hts_kor_isnm }} <span
                            style="font-size:12px; color:#999;">{{item.stck_shrn_iscd}}</span>
                    </td>
                    <td class="price-align">{{ item.stck_prpr }}</td>
                    <td class="price-align">
                        <span
                            class="{% if item.prdy_vrss_sign == '1' or item.prdy_vrss_sign == '2' %}up{% elif item.prdy_vrss_sign == '4' or item.prdy_vrss_sign == '5' %}down{% endif %}">
                            {{ item.prdy_ctrt }}%
                        </span>
                    </td>
                    <td class="price-align">{{ item.acml_vol }}</td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="5" style="text-align: center; padding: 40px; color: #888;">ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <!-- ê±°ë˜ëŸ‰ ìƒìœ„ -->
    <div id="volume" class="section-wrapper">
        <table class="ranking-table">
            <thead>
                <tr>
                    <th style="width: 60px; text-align: center;">ìˆœìœ„</th>
                    <th>ì¢…ëª©ëª…</th>
                    <th class="price-align">í˜„ì¬ê°€</th>
                    <th class="price-align">ë“±ë½ë¥ </th>
                    <th class="price-align">ê±°ë˜ëŸ‰</th>
                </tr>
            </thead>
            <tbody>
                {% for item in rank_volume %}
                <tr>
                    <td class="rank-num {% if forloop.counter <= 3 %}rank-top{% endif %}">{{ forloop.counter }}</td>
                    <td class="stock-name-cell"
                        onclick="location.href='/stock_price/stock/detail/{{ item.mksc_shrn_iscd }}/'">
                        {{ item.hts_kor_isnm }} <span
                            style="font-size:12px; color:#999;">{{item.mksc_shrn_iscd}}</span>
                    </td>
                    <td class="price-align">{{ item.stck_prpr }}</td>
                    <td class="price-align">
                        <span
                            class="{% if item.prdy_vrss_sign == '1' or item.prdy_vrss_sign == '2' %}up{% elif item.prdy_vrss_sign == '4' or item.prdy_vrss_sign == '5' %}down{% endif %}">
                            {{ item.prdy_ctrt }}%
                        </span>
                    </td>
                    <td class="price-align">{{ item.acml_vol }}</td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="5" style="text-align: center; padding: 40px; color: #888;">ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{% static 'stock_price/js/ranking.js' %}"></script>
{% endblock %}